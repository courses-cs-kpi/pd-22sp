<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/courses/pd/22sp/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/courses/pd/22sp/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/courses/pd/22sp/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/courses/pd/22sp/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Implementing comparison | Головна</title><meta name="generator" content="Jekyll v3.9.0" /><meta property="og:title" content="Implementing comparison" /><meta name="author" content="Юрій Кочура" /><meta property="og:locale" content="en_US" /><meta name="description" content="In Autocomplete, we will implement the Term data type, which represents a possible autocompletion term. Similar to how the println method (client) depends on toString, the autocomplete algorithm (client) depends on functionality to compare any two autocompletion terms in the form of a compareTo public method." /><meta property="og:description" content="In Autocomplete, we will implement the Term data type, which represents a possible autocompletion term. Similar to how the println method (client) depends on toString, the autocomplete algorithm (client) depends on functionality to compare any two autocompletion terms in the form of a compareTo public method." /><link rel="canonical" href="http://localhost:4000/courses/pd/22sp/intro/comparable/implementing-comparison/" /><meta property="og:url" content="http://localhost:4000/courses/pd/22sp/intro/comparable/implementing-comparison/" /><meta property="og:site_name" content="Головна" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-02-04T20:32:23+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Implementing comparison" /><meta name="google-site-verification" content="QclY_1udbdKts462GzFHLmFoaioICIQ16kjZumjRJIg" /> <script type="application/ld+json"> {"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/courses/pd/22sp/intro/comparable/implementing-comparison/"},"author":{"@type":"Person","name":"Юрій Кочура"},"headline":"Implementing comparison","dateModified":"2022-02-04T20:32:23+02:00","datePublished":"2022-02-04T20:32:23+02:00","description":"In Autocomplete, we will implement the Term data type, which represents a possible autocompletion term. Similar to how the println method (client) depends on toString, the autocomplete algorithm (client) depends on functionality to compare any two autocompletion terms in the form of a compareTo public method.","url":"http://localhost:4000/courses/pd/22sp/intro/comparable/implementing-comparison/","@context":"https://schema.org"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> </svg><div id="main-content-wrap" class="main-content-wrap"><div id="main-content" class="main-content" role="main"><p>In Autocomplete, we will implement the <code class="language-plaintext highlighter-rouge">Term</code> data type, which represents a possible autocompletion term. Similar to how the <code class="language-plaintext highlighter-rouge">println</code> method (client) depends on <code class="language-plaintext highlighter-rouge">toString</code>, the autocomplete algorithm (client) depends on functionality to <strong>compare any two autocompletion terms</strong> in the form of a <code class="language-plaintext highlighter-rouge">compareTo</code> public method.</p><p>The <code class="language-plaintext highlighter-rouge">compareTo</code> method takes another instance of the same class and returns an <code class="language-plaintext highlighter-rouge">int</code> representing the comparison relationship between the current and other instance.</p><ul><li>If <code class="language-plaintext highlighter-rouge">this &lt; other</code>, then <code class="language-plaintext highlighter-rouge">this.compareTo(other) &lt; 0</code>.<li>If <code class="language-plaintext highlighter-rouge">this == other</code>, then <code class="language-plaintext highlighter-rouge">this.compareTo(other) == 0</code>.<li>If <code class="language-plaintext highlighter-rouge">this &gt; other</code>, then <code class="language-plaintext highlighter-rouge">this.compareTo(other) &gt; 0</code>.</ul><p>For example, in the <code class="language-plaintext highlighter-rouge">Balance</code> class, we can define a <code class="language-plaintext highlighter-rouge">compareTo</code> method to compare the current balance’s value against another balance. (Rest of the class is omitted.)</p><div overlay="Implementer" class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Balance</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">totalCents</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="nc">Balance</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">totalCents</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="na">totalCents</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><p>This way, we define larger balances as “greater than” smaller balances.</p><ul><li>If <code class="language-plaintext highlighter-rouge">this.totalCents &lt; other.totalCents</code>, then <code class="language-plaintext highlighter-rouge">this.compareTo(other) &lt; 0</code>.<li>If <code class="language-plaintext highlighter-rouge">this.totalCents == other.totalCents</code>, then <code class="language-plaintext highlighter-rouge">this.compareTo(other) == 0</code>.<li>If <code class="language-plaintext highlighter-rouge">this.totalCents &gt; other.totalCents</code>, then <code class="language-plaintext highlighter-rouge">this.compareTo(other) &gt; 0</code>.</ul><p>Sun anticipated programmers would need to write classes that implemented <code class="language-plaintext highlighter-rouge">Comparable</code>, so they provided helper methods for many commonly-used data types including <code class="language-plaintext highlighter-rouge">int</code>, <code class="language-plaintext highlighter-rouge">double</code>, and <code class="language-plaintext highlighter-rouge">String</code>. For objects such as <code class="language-plaintext highlighter-rouge">String</code>, we can be the client of the <code class="language-plaintext highlighter-rouge">String</code> class’s <code class="language-plaintext highlighter-rouge">compareTo</code> method by calling <code class="language-plaintext highlighter-rouge">compareTo</code> ourselves.</p><p>However, we can’t call <code class="language-plaintext highlighter-rouge">this.totalCents.compareTo(other.totalCents)</code> directly since <code class="language-plaintext highlighter-rouge">totalCents</code> is an <code class="language-plaintext highlighter-rouge">int</code> primitive type, not an object. Instead, the <code class="language-plaintext highlighter-rouge">Integer</code> and <code class="language-plaintext highlighter-rouge">Double</code> classes provide a special static method <code class="language-plaintext highlighter-rouge">compare</code> that returns the <code class="language-plaintext highlighter-rouge">compareTo</code> result between two numbers, <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code>.</p><div overlay="Implementer" class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Balance</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">totalCents</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="nc">Balance</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">totalCents</span><span class="o">,</span> <span class="n">other</span><span class="o">.</span><span class="na">totalCents</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><details> <summary>Describe a change that would make smaller balances "greater than" larger balances.</summary><p>Negate the result before returning it, or subtract <code class="language-plaintext highlighter-rouge">this.totalCents</code> from <code class="language-plaintext highlighter-rouge">other.totalCents</code>.</p><div overlay="Implementer" class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="nc">Balance</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">-</span><span class="nc">Integer</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">totalCents</span><span class="o">,</span> <span class="n">other</span><span class="o">.</span><span class="na">totalCents</span><span class="o">);</span>
    <span class="c1">// return other.totalCents - this.totalCents;</span>
<span class="o">}</span>
</code></pre></div></div></details><p>We prefer <code class="language-plaintext highlighter-rouge">Integer.compare</code> and <code class="language-plaintext highlighter-rouge">Double.compare</code> instead of subtracting numbers directly because of a subtlety when returning the difference of two <code class="language-plaintext highlighter-rouge">double</code> values as an <code class="language-plaintext highlighter-rouge">int</code>. Java <strong>truncuates</strong> <code class="language-plaintext highlighter-rouge">double</code> values when converting to <code class="language-plaintext highlighter-rouge">int</code>. For example, suppose we defined balances in <code class="language-plaintext highlighter-rouge">double totalDollars</code> rather than <code class="language-plaintext highlighter-rouge">int totalCents</code>. If we take a $1.75 balance and compare it with a $1.00 balance, the difference of $0.75 is truncated down to 0 so the two balances would be considered the same!</p></div></div>
