<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/courses/pd/22sp/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/courses/pd/22sp/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/courses/pd/22sp/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/courses/pd/22sp/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Comparable | Головна</title><meta name="generator" content="Jekyll v3.9.0" /><meta property="og:title" content="Comparable" /><meta name="author" content="Юрій Кочура" /><meta property="og:locale" content="en_US" /><meta name="description" content="Comparable" /><meta property="og:description" content="Comparable" /><link rel="canonical" href="http://localhost:4000/courses/pd/22sp/intro/comparable/" /><meta property="og:url" content="http://localhost:4000/courses/pd/22sp/intro/comparable/" /><meta property="og:site_name" content="Головна" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-02-04T20:32:23+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Comparable" /><meta name="google-site-verification" content="QclY_1udbdKts462GzFHLmFoaioICIQ16kjZumjRJIg" /> <script type="application/ld+json"> {"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/courses/pd/22sp/intro/comparable/"},"author":{"@type":"Person","name":"Юрій Кочура"},"headline":"Comparable","dateModified":"2022-02-04T20:32:23+02:00","datePublished":"2022-02-04T20:32:23+02:00","description":"Comparable","url":"http://localhost:4000/courses/pd/22sp/intro/comparable/","@context":"https://schema.org"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="http://localhost:4000/courses/pd/22sp/" class="site-title lh-tight"> Головна </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/courses/pd/22sp/about/" class="nav-list-link">Про курс</a><li class="nav-list-item"><a href="http://localhost:4000/courses/pd/22sp/staff/" class="nav-list-link">Викладацький склад</a><li class="nav-list-item"><a href="http://localhost:4000/courses/pd/22sp/seminar/" class="nav-list-link">Семінар</a></ul><div class="nav-category">Нотатки лекцій</div><ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/courses/pd/22sp/intro/" class="nav-list-link">Вступ</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/courses/pd/22sp/intro/welcome/" class="nav-list-link">Загальна інформація</a><li class="nav-list-item active"><a href="http://localhost:4000/courses/pd/22sp/intro/comparable/" class="nav-list-link active">Comparable</a></ul></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Головна" aria-label="Search Головна" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/courses/pd/22sp/intro/">Вступ</a><li class="breadcrumb-nav-list-item"><span>Comparable</span></ol></nav><div id="main-content" class="main-content" role="main"><h1 id="comparable"> <a href="#comparable" class="anchor-heading" aria-labelledby="comparable"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Comparable</h1><h2 class="text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ol><li><a href="#client-vs-implementer">Client vs implementer</a><li><a href="#implementing-comparison">Implementing comparison</a><li><a href="#interfaces">Interfaces</a><li><a href="#internal-correctness">Internal correctness</a><li><a href="#encapsulation">Encapsulation</a></ol><hr /><h2 id="client-vs-implementer"> <a href="#client-vs-implementer" class="anchor-heading" aria-labelledby="client-vs-implementer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Client vs implementer</h2><p>Any Java programmer can define their own <strong>data types</strong> by writing Java classes. Earlier, we implemented a <code class="language-plaintext highlighter-rouge">Balance</code> class that represented a currency amount in dollars and cents. We discussed two ways of implementing the <code class="language-plaintext highlighter-rouge">Balance</code> class.</p><ol><li>Using two fields: <code class="language-plaintext highlighter-rouge">dollars</code> and <code class="language-plaintext highlighter-rouge">cents</code>.<li>Or using only one field: just <code class="language-plaintext highlighter-rouge">totalCents</code>.</ol><p>But computer programs, such as the <code class="language-plaintext highlighter-rouge">Balance</code> class, do not exist in isolation. They’re part of a larger ecosystem of programs that connect and communicate with each other to get things done. It turns out that this idea is a powerful example of <strong>abstraction</strong>: our <code class="language-plaintext highlighter-rouge">Balance</code> class defines public methods so that other programs written by anyone, anywhere, at anytime before or after it can rely on its functionality as long as they know how to interface with it.</p><p>Let’s understand this by asking a question: <strong>How exactly does Java print out a $1.50 balance?</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Balance</span> <span class="n">balance</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Balance</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">50</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">balance</span><span class="o">);</span>
</code></pre></div></div><ol><li><code class="language-plaintext highlighter-rouge">System.out</code> evaluates to an instance of Java’s <code class="language-plaintext highlighter-rouge">PrintStream</code> class that has a <code class="language-plaintext highlighter-rouge">println</code> method.<li>Control is transferred to the <code class="language-plaintext highlighter-rouge">println</code> method in order to print out the balance.<li>But in 1996, Sun (the original developers behind Java 1.0) could not have known exactly how we would define our <code class="language-plaintext highlighter-rouge">Balance</code> class. One field, two fields, or something completely different?</ol><p>Sun chose to resolve this design challenge by having the <code class="language-plaintext highlighter-rouge">println</code> method call the balance’s <code class="language-plaintext highlighter-rouge">toString</code> method. By including a <code class="language-plaintext highlighter-rouge">toString</code> <strong>public method</strong> in the <code class="language-plaintext highlighter-rouge">Balance</code> class, any program written by anyone, anywhere, at anytime can get a string representation of a balance.</p><p>In this example, we consider Sun the <strong>client</strong> of our <code class="language-plaintext highlighter-rouge">toString</code> method. We (the programmer for the <code class="language-plaintext highlighter-rouge">Balance</code> class) are the <strong>implementer</strong> of the <code class="language-plaintext highlighter-rouge">toString</code> method.</p><dl><dt>Client<dd>The requester of some method or service.<dt>Implementer<dd>The provider of some method or service.</dl><h2 id="implementing-comparison"> <a href="#implementing-comparison" class="anchor-heading" aria-labelledby="implementing-comparison"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Implementing comparison</h2><p>In Autocomplete, we will implement the <code class="language-plaintext highlighter-rouge">Term</code> data type, which represents a possible autocompletion term. Similar to how the <code class="language-plaintext highlighter-rouge">println</code> method (client) depends on <code class="language-plaintext highlighter-rouge">toString</code>, the autocomplete algorithm (client) depends on functionality to <strong>compare any two autocompletion terms</strong> in the form of a <code class="language-plaintext highlighter-rouge">compareTo</code> public method.</p><p>The <code class="language-plaintext highlighter-rouge">compareTo</code> method takes another instance of the same class and returns an <code class="language-plaintext highlighter-rouge">int</code> representing the comparison relationship between the current and other instance.</p><ul><li>If <code class="language-plaintext highlighter-rouge">this &lt; other</code>, then <code class="language-plaintext highlighter-rouge">this.compareTo(other) &lt; 0</code>.<li>If <code class="language-plaintext highlighter-rouge">this == other</code>, then <code class="language-plaintext highlighter-rouge">this.compareTo(other) == 0</code>.<li>If <code class="language-plaintext highlighter-rouge">this &gt; other</code>, then <code class="language-plaintext highlighter-rouge">this.compareTo(other) &gt; 0</code>.</ul><p>For example, in the <code class="language-plaintext highlighter-rouge">Balance</code> class, we can define a <code class="language-plaintext highlighter-rouge">compareTo</code> method to compare the current balance’s value against another balance. (Rest of the class is omitted.)</p><div overlay="Implementer" class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Balance</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">totalCents</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="nc">Balance</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">totalCents</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="na">totalCents</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><p>This way, we define larger balances as “greater than” smaller balances.</p><ul><li>If <code class="language-plaintext highlighter-rouge">this.totalCents &lt; other.totalCents</code>, then <code class="language-plaintext highlighter-rouge">this.compareTo(other) &lt; 0</code>.<li>If <code class="language-plaintext highlighter-rouge">this.totalCents == other.totalCents</code>, then <code class="language-plaintext highlighter-rouge">this.compareTo(other) == 0</code>.<li>If <code class="language-plaintext highlighter-rouge">this.totalCents &gt; other.totalCents</code>, then <code class="language-plaintext highlighter-rouge">this.compareTo(other) &gt; 0</code>.</ul><p>Sun anticipated programmers would need to write classes that implemented <code class="language-plaintext highlighter-rouge">Comparable</code>, so they provided helper methods for many commonly-used data types including <code class="language-plaintext highlighter-rouge">int</code>, <code class="language-plaintext highlighter-rouge">double</code>, and <code class="language-plaintext highlighter-rouge">String</code>. For objects such as <code class="language-plaintext highlighter-rouge">String</code>, we can be the client of the <code class="language-plaintext highlighter-rouge">String</code> class’s <code class="language-plaintext highlighter-rouge">compareTo</code> method by calling <code class="language-plaintext highlighter-rouge">compareTo</code> ourselves.</p><p>However, we can’t call <code class="language-plaintext highlighter-rouge">this.totalCents.compareTo(other.totalCents)</code> directly since <code class="language-plaintext highlighter-rouge">totalCents</code> is an <code class="language-plaintext highlighter-rouge">int</code> primitive type, not an object. Instead, the <code class="language-plaintext highlighter-rouge">Integer</code> and <code class="language-plaintext highlighter-rouge">Double</code> classes provide a special static method <code class="language-plaintext highlighter-rouge">compare</code> that returns the <code class="language-plaintext highlighter-rouge">compareTo</code> result between two numbers, <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code>.</p><div overlay="Implementer" class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Balance</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">totalCents</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="nc">Balance</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">totalCents</span><span class="o">,</span> <span class="n">other</span><span class="o">.</span><span class="na">totalCents</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><details> <summary>Describe a change that would make smaller balances "greater than" larger balances.</summary><p>Negate the result before returning it, or subtract <code class="language-plaintext highlighter-rouge">this.totalCents</code> from <code class="language-plaintext highlighter-rouge">other.totalCents</code>.</p><div overlay="Implementer" class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="nc">Balance</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">-</span><span class="nc">Integer</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">totalCents</span><span class="o">,</span> <span class="n">other</span><span class="o">.</span><span class="na">totalCents</span><span class="o">);</span>
    <span class="c1">// return other.totalCents - this.totalCents;</span>
<span class="o">}</span>
</code></pre></div></div></details><p>We prefer <code class="language-plaintext highlighter-rouge">Integer.compare</code> and <code class="language-plaintext highlighter-rouge">Double.compare</code> instead of subtracting numbers directly because of a subtlety when returning the difference of two <code class="language-plaintext highlighter-rouge">double</code> values as an <code class="language-plaintext highlighter-rouge">int</code>. Java <strong>truncuates</strong> <code class="language-plaintext highlighter-rouge">double</code> values when converting to <code class="language-plaintext highlighter-rouge">int</code>. For example, suppose we defined balances in <code class="language-plaintext highlighter-rouge">double totalDollars</code> rather than <code class="language-plaintext highlighter-rouge">int totalCents</code>. If we take a $1.75 balance and compare it with a $1.00 balance, the difference of $0.75 is truncated down to 0 so the two balances would be considered the same!</p><h2 id="interfaces"> <a href="#interfaces" class="anchor-heading" aria-labelledby="interfaces"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Interfaces</h2><p>We’ve just implemented the <code class="language-plaintext highlighter-rouge">compareTo</code> method, but it turns out that this isn’t enough to implement a comparison relationship! One key difference between <code class="language-plaintext highlighter-rouge">toString</code> and <code class="language-plaintext highlighter-rouge">compareTo</code> is that every class contains a <code class="language-plaintext highlighter-rouge">toString</code> method (the default returns a gibberish string), but not every class necessarily contains a <code class="language-plaintext highlighter-rouge">compareTo</code> method.</p><p>The goal of compiling a Java program is to guarantee that it can run. The Java compiler checks to make sure all of the programs in the ecosystem can work together, but it can’t maintain that guarantee across all data types since <code class="language-plaintext highlighter-rouge">compareTo</code> is not automatically provided until a programmer writes the method.</p><p>To communicate the fact that we’ve written a valid and complete <code class="language-plaintext highlighter-rouge">compareTo</code> method, the class header must also <code class="language-plaintext highlighter-rouge">implements Comparable&lt;...&gt;</code> where <code class="language-plaintext highlighter-rouge">...</code> is replaced with the same type.</p><div overlay="Implementer" class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Balance</span> <span class="kd">implements</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="nc">Balance</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">totalCents</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="nc">Balance</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">totalCents</span><span class="o">,</span> <span class="n">other</span><span class="o">.</span><span class="na">totalCents</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><p>We read the class header as, “A public class <code class="language-plaintext highlighter-rouge">Balance</code> that can be compared against other instances of <code class="language-plaintext highlighter-rouge">Balance</code>.” The class is now <strong>comparable</strong>: it can be compared against other instances of the same type.</p><dl><dt><code class="language-plaintext highlighter-rouge">Comparable</code><dd>The interface that requires a single method, <code class="language-plaintext highlighter-rouge">compareTo</code>. It accepts a generic type that represents the class of the other object to be compared against.</dl><h2 id="internal-correctness"> <a href="#internal-correctness" class="anchor-heading" aria-labelledby="internal-correctness"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Internal correctness</h2><blockquote><p>A computer language is not just a way of getting a computer to perform operations but rather […] a novel formal medium for expressing ideas about methodology. Thus, programs must be written for people to read, and only incidentally for machines to execute.<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup></p></blockquote><p>In this course, we will primarily study two measures of correctness as it relates to code quality.</p><dl><dt>External correctness<dd>A program where the desired outcome is correctly produced by a computer.</dl><p>However, external correctness is not the only criteria for determining the quality of a program.</p><blockquote><p>There are numerous ways a software project can fail: projects can be over budget, they can ship late, they can fail to be useful, or they can simply not be useful enough. Evidence clearly shows that success is highly contextual and stakeholder-dependent: success might be financial, social, physical and even emotional, suggesting that software engineering success is a multifaceted variable that cannot explained simply by user satisfaction, profitability or meeting requirements, budgets and schedules.<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup></p></blockquote><blockquote><p>Whereas [external correctness criteria] are concerned with how software behaves technically according to specifications, some qualities concern properties of how developers interact with code:<sup id="fnref:2:1" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup></p><ul><li><strong>Verifiability</strong> is the effort required to verify that software does what it is intended to do. For example, it is hard to verify a safety critical system without either proving it correct or testing it in a safety-critical context (which isn’t safe). Take driverless cars, for example: for Google to test their software, they’ve had to set up thousands of paid drivers to monitor and report problems on the road. In contrast, verifying that a simple static HTML web page works correctly is as simple as opening it in a browser.<li><strong>Maintainability</strong> is the effort required to correct, adapt, or perfect software. This depends mostly on how comprehensible and modular an implementation is.<li><strong>Reusability</strong> is the effort required to use a program’s components for purposes other than those for which it was originally designed. APIs are reusable by definition, whereas black box embedded software (like the software built into a car’s traction systems) is not.</ul></blockquote><p>Together, we call these criteria for how developers interact with code, “internal correctness.”</p><dl><dt>Internal correctness<dd>A program where the desired outcome is easily understood by other human programmers.</dl><p>Writing high-quality programs takes deliberate practice, so these guidelines are not meant to be memorized at first. Instead, we’ll learn how to write high-quality programs through a process called <strong>code review</strong>, the practice of reviewing code with an eye towards code quality.</p><h3 id="documenting-code"> <a href="#documenting-code" class="anchor-heading" aria-labelledby="documenting-code"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Documenting code</h3><p>The goal of documenting code is to describe what happens without going into detail about how.</p><p>For example, say we added a <code class="language-plaintext highlighter-rouge">nextDay</code> method to the <code class="language-plaintext highlighter-rouge">CalendarDate</code> class that returns a new <code class="language-plaintext highlighter-rouge">CalendarDate</code> for the following day. In order to work as expected, the implementation of the method might increment the month if the current day is already the last day of the month (which varies across different months). Or, it might increment the year if the current date is New Year’s Eve.</p><p>But these <strong>implementation details</strong> aren’t relevant to the <strong>client</strong> of the <code class="language-plaintext highlighter-rouge">CalendarDate</code> class. We document code by adding inline code comments. Ideally, a client should only have to read the method comment (a line preceded by <code class="language-plaintext highlighter-rouge">//</code>) and the method signature (return type, name, parameters) to know how to use a method.</p><div overlay="Implementer" class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalendarDate</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">month</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">day</span><span class="o">;</span>

    <span class="c1">// Returns a new CalendarDate representing the next day, wrapping month or year as necessary.</span>
    <span class="kd">public</span> <span class="nc">CalendarDate</span> <span class="nf">nextDay</span><span class="o">()</span> <span class="o">{</span>
        <span class="o">...</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><p><strong>Every method needs a descriptive comment about its behavior without implementation details.</strong> Comments should describe the behavior of a method (what it does) without its implementation (how it does it). If someone is really interested in seeing exactly how a method works, they can read the code.</p><div class="footnotes" role="doc-endnotes"><ol><li id="fn:1" role="doc-endnote"><p>Harold Abelson, Gerald Jay Sussman, Julie Sussman. 1984. “Preface to the First Edition.” <em>Structure and Interpretation of Computer Programs.</em> <a href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-7.html#%_chap_Temp_4">https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-7.html#%_chap_Temp_4</a> <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:2" role="doc-endnote"><p>Amy J. Ko. 2020. “Quality.” <em>Cooperative Software Development.</em> <a href="http://faculty.washington.edu/ajko/books/cooperative-software-development/#/quality">http://faculty.washington.edu/ajko/books/cooperative-software-development/#/quality</a> <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a> <a href="#fnref:2:1" class="reversefootnote" role="doc-backlink">&#8617;<sup>2</sup></a></p></ol></div><h2 id="encapsulation"> <a href="#encapsulation" class="anchor-heading" aria-labelledby="encapsulation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Encapsulation</h2><p>One important design decision about the <code class="language-plaintext highlighter-rouge">CalendarDate</code> class is the use of <strong>private fields</strong>. By declaring fields <code class="language-plaintext highlighter-rouge">private</code>, they allow access and modification only by code defined inside the implementing class. This helps to ensure external correctness by preventing clients from unexpectedly modifying important values.</p><div overlay="Implementer" class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalendarDate</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">month</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">day</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div><div overlay="Client" class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Calendar</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">CalendarDate</span> <span class="n">welcome</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CalendarDate</span><span class="o">(</span><span class="mi">2020</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">30</span><span class="o">);</span>
        <span class="c1">// private access prevents the following line of code from compiling</span>
        <span class="n">welcome</span><span class="o">.</span><span class="na">day</span> <span class="o">=</span> <span class="mi">31</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><p>In programming, this idea of preventing unexpected changes to the fields of an object is <strong>encapsulation</strong>. However, the <code class="language-plaintext highlighter-rouge">private</code> keyword prevents both access and modification, so it prevents clients from accessing (reading) the value of the current <code class="language-plaintext highlighter-rouge">day</code>.</p><h3 id="getters-and-setters"> <a href="#getters-and-setters" class="anchor-heading" aria-labelledby="getters-and-setters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getters and setters</h3><p>To selectively allow access to fields, implementers can add <strong>getter</strong> methods that return copies of fields.</p><div overlay="Implementer" class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalendarDate</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">month</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">day</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">year</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">year</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">month</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">month</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">day</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">day</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><p>This allows clients to access the current day without allowing unintended modification.</p><div overlay="Client" class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">CalendarDate</span> <span class="n">welcome</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CalendarDate</span><span class="o">(</span><span class="mi">2020</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">30</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">wednesday</span> <span class="o">=</span> <span class="n">welcome</span><span class="o">.</span><span class="na">day</span><span class="o">();</span>
<span class="n">wednesday</span> <span class="o">=</span> <span class="mi">31</span><span class="o">;</span>
</code></pre></div></div><details> <summary>Why doesn't reassigning wednesday change the welcome object?</summary><p><code class="language-plaintext highlighter-rouge">int wednesday</code> is a local variable assigned a copy of the number representing the <code class="language-plaintext highlighter-rouge">welcome</code> day. Changes to the local variable won’t affect the encapsulated <code class="language-plaintext highlighter-rouge">welcome</code> object.</p></details><p>To selectively allow modification of fields, implementers can add <strong>setter</strong> methods.</p><div overlay="Implementer" class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalendarDate</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">month</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">day</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setYear</span><span class="o">(</span><span class="kt">int</span> <span class="n">year</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">=</span> <span class="n">year</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><p>Since getters and setters are methods, they can include extra code to validate and check any of the given parameters.</p><div overlay="Implementer" class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalendarDate</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">month</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">day</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setDate</span><span class="o">(</span><span class="kt">int</span> <span class="n">year</span><span class="o">,</span> <span class="kt">int</span> <span class="n">month</span><span class="o">,</span> <span class="kt">int</span> <span class="n">day</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Check that the date is valid!</span>
        <span class="n">validateDate</span><span class="o">(</span><span class="n">year</span><span class="o">,</span> <span class="n">month</span><span class="o">,</span> <span class="n">day</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">=</span> <span class="n">year</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">month</span> <span class="o">=</span> <span class="n">month</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">day</span> <span class="o">=</span> <span class="n">day</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><hr><footer><p class="text-small text-grey-dk-100 mb-0">Юрій Кочура &copy; 2022 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></p></footer></div></div><div class="search-overlay"></div></div>
